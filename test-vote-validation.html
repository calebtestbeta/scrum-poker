<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ•ç¥¨å€¼é©—è­‰æ¸¬è©¦</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 50px auto; 
            padding: 20px;
        }
        .test-result { 
            margin: 10px 0; 
            padding: 10px; 
            border-radius: 5px; 
        }
        .pass { background-color: #d4edda; color: #155724; }
        .fail { background-color: #f8d7da; color: #721c24; }
        button { 
            background-color: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
        button:hover { background-color: #0056b3; }
        #console { 
            background-color: #f8f9fa; 
            border: 1px solid #dee2e6; 
            padding: 15px; 
            margin-top: 20px; 
            height: 300px; 
            overflow-y: scroll; 
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ æŠ•ç¥¨å€¼é©—è­‰æ¸¬è©¦</h1>
    <p>æ­¤é é¢ç”¨æ–¼æ¸¬è©¦ä¿®å¾©å¾Œçš„æŠ•ç¥¨å€¼é©—è­‰é‚è¼¯</p>
    
    <button onclick="runAllTests()">åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦</button>
    <button onclick="clearConsole()">æ¸…é™¤æ§åˆ¶å°</button>
    
    <div id="results"></div>
    
    <h2>æ§åˆ¶å°è¼¸å‡º</h2>
    <div id="console"></div>

    <script>
        // é‡å¯« console.log å’Œ console.error ä¾†é¡¯ç¤ºåœ¨é é¢ä¸Š
        const originalLog = console.log;
        const originalError = console.error;
        const consoleDiv = document.getElementById('console');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleDiv.innerHTML += '<div style="color: #28a745;">[LOG] ' + args.join(' ') + '</div>';
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            consoleDiv.innerHTML += '<div style="color: #dc3545;">[ERROR] ' + args.join(' ') + '</div>';
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };
        
        function clearConsole() {
            consoleDiv.innerHTML = '';
        }
        
        // å…§åµŒ validateVoteValue å‡½æ•¸ç”¨æ–¼æ¸¬è©¦
        function validateVoteValue(vote) {
            // å…è¨±çš„ Fibonacci æ•¸åˆ—
            const allowedNumbers = [0, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 100];
            // å…è¨±çš„ç‰¹æ®Šå€¼ (åŒ…å«å¤šç¨®è¡¨ç¤ºæ–¹å¼)
            const allowedSpecial = ['?', 'â“', 'question', 'â˜•', 'coffee', 'âˆ', 'infinity'];
            
            // æ•¸å­—é¡å‹é©—è­‰
            if (typeof vote === 'number' && allowedNumbers.includes(vote)) {
                console.log(`âœ… æœ‰æ•ˆæ•¸å­—æŠ•ç¥¨å€¼: ${vote}`);
                return vote;
            }
            
            // å­—ä¸²é¡å‹é©—è­‰ (æ”¯æ´å¤šç¨®è¡¨ç¤ºæ–¹å¼)
            if (typeof vote === 'string' && allowedSpecial.includes(vote)) {
                console.log(`âœ… æœ‰æ•ˆç‰¹æ®ŠæŠ•ç¥¨å€¼: ${vote}`);
                return vote;
            }
            
            // è©³ç´°éŒ¯èª¤æ—¥èªŒ
            console.error(`âŒ ç„¡æ•ˆçš„æŠ•ç¥¨å€¼:`, {
                value: vote,
                type: typeof vote,
                allowedNumbers,
                allowedSpecial
            });
            
            throw new Error(`ç„¡æ•ˆçš„æŠ•ç¥¨å€¼: ${vote} (é¡å‹: ${typeof vote})`);
        }
        
        function showResult(testName, passed, message) {
            const resultsDiv = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'test-result ' + (passed ? 'pass' : 'fail');
            resultDiv.innerHTML = `<strong>${testName}:</strong> ${passed ? 'âœ… é€šé' : 'âŒ å¤±æ•—'} - ${message}`;
            resultsDiv.appendChild(resultDiv);
        }
        
        function testValidateVoteValue() {
            console.log('ğŸ§ª é–‹å§‹æ¸¬è©¦ validateVoteValue å‡½æ•¸...');
            
            const testCases = [
                // æœ‰æ•ˆæ•¸å­—
                { input: 0, expected: true, description: 'æ•¸å­— 0' },
                { input: 1, expected: true, description: 'æ•¸å­— 1' },
                { input: 2, expected: true, description: 'æ•¸å­— 2' },
                { input: 3, expected: true, description: 'æ•¸å­— 3' },
                { input: 5, expected: true, description: 'æ•¸å­— 5' },
                { input: 8, expected: true, description: 'æ•¸å­— 8' },
                { input: 13, expected: true, description: 'æ•¸å­— 13' },
                { input: 21, expected: true, description: 'æ•¸å­— 21' },
                { input: 34, expected: true, description: 'æ•¸å­— 34' },
                { input: 55, expected: true, description: 'æ•¸å­— 55' },
                { input: 89, expected: true, description: 'æ•¸å­— 89' },
                { input: 100, expected: true, description: 'æ•¸å­— 100' },
                
                // æœ‰æ•ˆç‰¹æ®Šå€¼
                { input: '?', expected: true, description: 'å•è™Ÿå­—ä¸²' },
                { input: 'â“', expected: true, description: 'å•è™Ÿ emoji' },
                { input: 'question', expected: true, description: 'question å­—ä¸²' },
                { input: 'â˜•', expected: true, description: 'å’–å•¡ emoji' },
                { input: 'coffee', expected: true, description: 'coffee å­—ä¸²' },
                { input: 'âˆ', expected: true, description: 'ç„¡é™ç¬¦è™Ÿ' },
                { input: 'infinity', expected: true, description: 'infinity å­—ä¸²' },
                
                // ç„¡æ•ˆå€¼
                { input: 4, expected: false, description: 'ç„¡æ•ˆæ•¸å­— 4' },
                { input: 6, expected: false, description: 'ç„¡æ•ˆæ•¸å­— 6' },
                { input: 7, expected: false, description: 'ç„¡æ•ˆæ•¸å­— 7' },
                { input: 'invalid', expected: false, description: 'ç„¡æ•ˆå­—ä¸²' },
                { input: null, expected: false, description: 'null å€¼' },
                { input: undefined, expected: false, description: 'undefined å€¼' },
                { input: [], expected: false, description: 'é™£åˆ—' },
                { input: {}, expected: false, description: 'ç‰©ä»¶' }
            ];
            
            testCases.forEach(testCase => {
                try {
                    const result = validateVoteValue(testCase.input);
                    if (testCase.expected) {
                        showResult(`æ¸¬è©¦ ${testCase.description}`, true, `è¿”å›å€¼: ${result}`);
                    } else {
                        showResult(`æ¸¬è©¦ ${testCase.description}`, false, 'æ‡‰è©²æ‹‹å‡ºéŒ¯èª¤ä½†æ²’æœ‰');
                    }
                } catch (error) {
                    if (testCase.expected) {
                        showResult(`æ¸¬è©¦ ${testCase.description}`, false, `æ„å¤–éŒ¯èª¤: ${error.message}`);
                    } else {
                        showResult(`æ¸¬è©¦ ${testCase.description}`, true, `æ­£ç¢ºæ‹‹å‡ºéŒ¯èª¤: ${error.message}`);
                    }
                }
            });
            
            console.log('âœ… validateVoteValue æ¸¬è©¦å®Œæˆ');
        }
        
        function runAllTests() {
            document.getElementById('results').innerHTML = '';
            clearConsole();
            console.log('ğŸš€ é–‹å§‹åŸ·è¡ŒæŠ•ç¥¨å€¼é©—è­‰æ¸¬è©¦...');
            testValidateVoteValue();
            console.log('ğŸ‰ æ‰€æœ‰æ¸¬è©¦åŸ·è¡Œå®Œç•¢ï¼');
        }
    </script>
</body>
</html>